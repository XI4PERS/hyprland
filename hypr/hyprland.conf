# #######################################################################################
# AUTOGENERATED HYPRLAND CONFIG.
# PLEASE USE THE CONFIG PROVIDED IN THE GIT REPO /examples/hyprland.conf AND EDIT IT,
# OR EDIT THIS ONE ACCORDING TO THE WIKI INSTRUCTIONS.
# #######################################################################################

# This is an example Hyprland config file.
# Refer to the wiki for more information.
# https://wiki.hyprland.org/Configuring/


################
### MONITORS ###
################

monitor=,preferred,auto,1


###################
### MY PROGRAMS ###
###################

$terminal = kitty
$fileManager = thunar
$menu = wofi --show drun
$browser = chromium


#################
### AUTOSTART ###
#################

exec-once = waybar &
exec-once = nm-applet &
exec-once = blueman-applet &
exec-once = hyprpaper

#############################
### ENVIRONMENT VARIABLES ###
#############################

env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt5ct


#####################
### LOOK AND FEEL ###
#####################

general {
    gaps_in = 3
    gaps_out = 5
    border_size = 2

    # Серо-белая цветовая схема
    col.active_border = rgba(ffffffee) rgba(ccccccff) rgba(999999ff) 45deg
    col.inactive_border = rgba(666666aa)

    resize_on_border = true
    allow_tearing = false
    layout = dwindle

}

decoration {
    rounding = 12

    active_opacity = 1.0
    inactive_opacity = 0.95

    # Blur эффекты
    blur {
        enabled = true
        size = 5
        passes = 2
        noise = 0.01
        contrast = 1.0
        brightness = 1.0
        vibrancy = 0.1696
        vibrancy_darkness = 0.0
    }
}

animations {
    enabled = yes

    # Плавные кривые Безье
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1
    bezier = overshot, 0.4, 0.8, 0.2, 1.2
    bezier = bounce, 0.68, -0.55, 0.27, 1.55
    bezier = slingshot, 1, -1, 0.15, 1.25
    bezier = gentle, 0.5, 0, 0, 1

    # Анимации окон
    animation = windows, 1, 4, overshot, slide
    animation = windowsOut, 1, 4, smoothOut, slide
    animation = windowsMove, 1, 3, gentle
    animation = border, 1, 6, smoothIn
    animation = borderangle, 1, 6, smoothIn
    animation = fade, 1, 3, smoothIn
    animation = fadeDim, 1, 3, smoothIn
    animation = workspaces, 1, 3, overshot, slide
    animation = specialWorkspace, 1, 3, smoothOut, slidefadevert
}

dwindle {
    pseudotile = yes
    preserve_split = yes

    special_scale_factor = 0.95
}

master {

    special_scale_factor = 0.95

}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    vfr = true
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    layers_hog_keyboard_focus = true
    focus_on_activate = true
}


#############
### INPUT ###
#############

input {
    kb_layout = us,ru
    kb_options = grp:alt_shift_toggle

    follow_mouse = 1
    mouse_refocus = false
    float_switch_override_focus = 2

    touchpad {
        natural_scroll = true
        disable_while_typing = true
        clickfinger_behavior = true
        scroll_factor = 1.0
    }

    sensitivity = 0.0
}

gestures {

    workspace_swipe_distance = 400
    workspace_swipe_invert = false
    workspace_swipe_min_speed_to_force = 5
    workspace_swipe_cancel_ratio = 0.2
    workspace_swipe_create_new = true
}


####################
### KEYBINDINGS ###
####################

source = ~/.config/hypr/keybind.conf

##############################
### WINDOWS AND WORKSPACES ###
##############################

# ОБЩИЕ ПРАВИЛА ПРОЗРАЧНОСТИ
windowrulev2 = opacity 0.89 0.82, class:.*
windowrulev2 = opacity 0.89 0.88, floating:1

# Терминал - чуть менее прозрачный для удобства чтения
windowrulev2 = opacity 0.86 0.82, class:^(kitty)$

# Браузер - хорошая читаемость
windowrulev2 = opacity 0.90 0.83, class:^(chromium)$
windowrulev2 = opacity 0.90 0.83, class:^(firefox)$
windowrulev2 = opacity 0.90 0.83, class:^(google-chrome)$

# Файловый менеджер
windowrulev2 = opacity 0.92 0.82, class:^(thunar)$
windowrulev2 = opacity 0.92 0.82, class:^(nemo)$

# VS Code
windowrulev2 = opacity 0.90 0.80, class:^(Code)$
windowrulev2 = opacity 0.90 0.80, class:^(code-url-handler)$

# Всплывающие и утилиты - более прозрачные
windowrulev2 = opacity 0.88 0.78, class:^(pavucontrol)$
windowrulev2 = opacity 0.88 0.78, class:^(blueman-manager)$
windowrulev2 = opacity 0.88 0.78, class:^(nm-connection-editor)$
windowrulev2 = opacity 0.85 0.75, class:^(wofi)$

# Игры и полноэкранные приложения - без прозрачности
windowrulev2 = opacity 1.0 1.0, fullscreen:1
windowrulev2 = opacity 1.0 1.0, class:^(steam_app_.*)$
windowrulev2 = opacity 1.0 1.0, class:^(gamescope)$
# Terraria - полноэкранный режим (правильный класс)
windowrulev2 = fullscreen, class:^(Ternaria\.bin\.x86_64)$
windowrulev2 = noborder, class:^(Ternaria\.bin\.x86_64)$
windowrulev2 = opacity 1.0 override 1.0 override, class:^(Ternaria\.bin\.x86_64)$
windowrulev2 = noanim, class:^(Ternaria\.bin\.x86_64)$
# Плавающие окна
windowrulev2 = float, class:^(file-roller)$
windowrulev2 = float, class:^(nemo)$
windowrulev2 = float, class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(com.github.Aylur.ags)$
windowrulev2 = float, class:^(wofi)$

# Центрирование плавающих окон
windowrulev2 = center, class:^(file-roller)$
windowrulev2 = center, class:^(pavucontrol)$
windowrulev2 = center, class:^(blueman-manager)$
windowrulev2 = center, class:^(nm-connection-editor)$
windowrulev2 = center, class:^(wofi)$

# Размеры плавающих окон
windowrulev2 = size 800 600, class:^(thunar)$, title:^(.*Thunar.*)$
windowrulev2 = size 800 500, class:^(pavucontrol)$
windowrulev2 = size 700 500, class:^(blueman-manager)$
windowrulev2 = size 900 700, class:^(nm-connection-editor)$

# Анимации для разных приложений
windowrulev2 = animation slide left, class:^(kitty)$
windowrulev2 = animation slide right, class:^(chromium)$
windowrulev2 = animation slide down, class:^(thunar)$
windowrulev2 = animation slide up, class:^(wofi)$
windowrulev2 = animation popin, class:^(pavucontrol)$

# Игровой режим
windowrulev2 = fullscreen, class:^(steam_app_.*)$
windowrulev2 = fullscreen, class:^(gamescope)$
windowrulev2 = noborder, fullscreen:1

# Игровые приложения
windowrulev2 = float, class:^(steam)$, title:^(Friends List)$
windowrulev2 = size 400 600, class:^(steam)$, title:^(Friends List)$

# Не фокусироваться на мессенджерах
windowrulev2 = suppressevent, focus, class:^(org.telegram.desktop)$
windowrulev2 = suppressevent, activate, class:^(org.telegram.desktop)$
windowrulev2 = nofocus, class:^(telegramdesktop)$
windowrulev2 = nofocus, class:^(element)$

# Дополнительно для всплывающих окон Telegram
windowrulev2 = float, class:^(org.telegram.desktop)$, title:.*(уведомление|notification).*
windowrulev2 = suppressevent, focus, class:^(org.telegram.desktop)$, floating:1

# Фиксы для XWayland
windowrulev2 = nofocus, class:^$, title:^$, xwayland:1, floating:1
windowrulev2 = noinitialfocus, class:^$, title:^$, xwayland:1, floating:1

# Подавление событий
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = suppressevent, focus, class:.*, title:^($browser)$

env = QT_QPA_PLATFORM,wayland;xcb
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
